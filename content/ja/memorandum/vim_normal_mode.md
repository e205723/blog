---
title: "Vimのノーマルモードのコマンド"
description: "言うなれば自分用ってやつ"
date: 2021-04-17T21:38:25+09:00
---

## どんな人がこの記事を読むべきか

この記事の対象は以下の条件に当てはまる人です。

{{< li >}}
- インサートモードで文字を入力することぐらいしかVimを活用できていない
- ```:q```, ```:qw```くらいしかコマンドを知らない
- Vimがなぜ人気なのかわからない人
{{< /li >}} 

または、

{{< li >}}
- 備忘録的なのが欲しい方
- ちょくちょくノーマルモードのコマンドを忘れてしまう方
{{< /li >}}

という感じです。

## Vimの良さを知ろう

Vimの素晴らしさはなんと言っても、「起動が速いこと」と「モード」が便利すぎることです。

### どれくらい速いか

```
vim --startuptime time.txt
```
これをコマンドで実行してみてください。

vimが開きます。何も書かれていませんが、```:q```で抜けて

```
less time.txt
```

上記のコマンドを実行すると

vimの起動までにかかる時間(msec)が記述されているはずです。

私の場合は```20.219msec```で、秒にすると```0.020219sec```でした。

数あるテキストエディタの起動時間では、これはかなり速い方です。

### モードとは何か

初めてVimに触れたとき、Vimが開かれた直後に文字を入力しようとしても「何も入力されない!」ってなったことありませんか?

これは単に、モードがインサートモードになっていないからなんですよね。

一般的なIDEに慣れ親しんでいる人は不便に感じるかもしれませんが、このモードって概念がとても優れているんですよ。

Vimのモードを大まかに羅列すると「ノーマルモード」、「コマンドラインモード」、「インサートモード」、「ビジュアルモード」、「ターミナルモード」に分類することができます。

{{< table >}}
| モード | 目的 |
|---|---|
| ノーマルモード | カーソル移動, モード変更, コマンド |
| コマンドモード | コマンド |
| インサートモード | 文字の入力 |
| ビジュアルモード | 文字の選択 |
| ターミナルモード | ターミナル操作 |
{{< /table >}}

## ノーマルモード

### ノーマルモードのコマンドについて

Vimはコマンドを駆使することでテキストの編集をすばやく行うことができます。よって、沢山のコマンドやそれらの組み合わせを勉強することで、Vimの作業効率を図ることができます。

ノーマルモードのコマンドを使うに当たって、あらかじめ知っておくと便利なことを紹介します。

```<数字>``` + ```<コマンド>```と行った形式でコマンドを入力すると、入力された```<コマンド>```が```<数字>```分行われます。

また、```.```(ドット)と入力するだけで前に実行されたコマンドや処理を現在のカーソル上で再実行してくれます。これはインサートモードで行った処理も再実行してくれるので、このコマンドはかなり重宝します。

では、早速コマンドを覚えていきましょう。

### まずはモーションコマンドから

VimはIDEのようにマウスでカーソルの位置をしたりできないので、初心者の方はとりあえず十字キーでカーソル移動をしてしまうことがあると思います。しかしながら、カーソル移動をするとき、Vimmerの前で十字キーを使ってはいけません。彼らは怒ってしまいます。

### ```h```,```j```,```k```,```l```で移動しよう

「なら、Vimmerに怒られないために、どうやってカーソル移動をすればいいんだ！」ってなる初心者がいるかも知れません。安心してください、```h```,```j```,```k```,```l```で移動すればいいのです。

{{< table >}}
| コマンド | 操作 |
|---|---|
| h | 左へ1つカーソルを移動 |
| j | 下へ1つカーソルを移動 |
| k | 上へ1つカーソルを移動 |
| l | 右へ1つカーソルを移動 |
{{< /table >}}

複数回移動したいなら、始めに数字を添えるといいです。

```<数字>``` + ```<コマンド>```

具体例で説明します、

***

```10``` + ```j```

これは「```10```回```j```を入力」 = 「```10```回下へカーソルを移動する」ということになります。

***

### 1つだけ移動だけじゃ不便?それなら```w```,```e```,```b```を覚えよう

「1文字だけでは素早い作業ができない!」って感じるかも知れません、そんな時は単語単位でカーソルを移動してくれるコマンドを使いましょう。

{{< table >}}
| コマンド | 操作 |
|---|---|
| w | 次の単語へカーソルを移動 |
| e | 単語の最後の文字にカーソルを移動 |
| b | 前の単語へカーソルを移動 |
{{< /table >}}

### もっとモーションコマンドを知りたい貪欲な人へ

応用的なモーションコマンドを紹介します。

中には行数に関するモーションコマンドが含まれますが、

```
:set number
```

または

```
:set nu
```

で行数を表示することができます。

なお、行数の表示が鬱陶しい場合、

```
:set nonumber
```

または

```
:set nonu
```

で行数の表示をオフにすることができます。

{{< table >}}
| コマンド | 操作 |
|---|---|
| 0 または ^ | 行の先頭へカーソルを移動 |
| $ | 行の最後へカーソルを移動 |
| f + <任意の文字>(1文字だけ) | 現在のカーソルの位置からfの後に打った文字を同じ行の中から探して最初に見つけたところにカーソルを移動 |
| t + <任意の文字>(1文字だけ) | 現在のカーソルの位置からfの後に打った文字を同じ行の中から探して最初に見つけたところの1個の文字にカーソルを移動 |
| gg | ファイルの先頭へカーソルを移動 |
| G (Shift + g) | ファイルの最後へカーソルを移動 |
| <数字> + G | <数字>行目へカーソルを移動 |
| <数字> + Enter | 現在のカーソルの位置からあと<数字>行目進んだ場所へカーソルを移動 |
| H | ウィンドウ内の上にカーソルを移動 |
| M | ウィンドウ内の中にカーソルを移動 |
| L | ウィンドウ内の下にカーソルを移動 |
| % | ()、{}、[]などの括弧の片方の上にカーソルを置いて実行すると、対応する一方の括弧へカーソルを移動する |
| Ctrl + o | 古いカーソル位置に戻る |
| Ctrl + i | 新しいカーソル位置に進む |
{{< /table >}} 

```f + <任意の文字>```に関して、```f```のあとに入力した```<任意の文字>```が現在の文に複数存在している場合、コマンド実行後、```;```を押して次の候補の位置へカーソルを移動、```,```で前の候補の位置へカーソルを移動することができます。

また```t + <任意の文字>```に関しても同じ操作が可能です。

### スクロール操作に関するコマンド

続いてスクロール操作に関するコマンドを学びましょう。

{{< table >}}
| コマンド | 操作 |
|---|---|
| Ctrl + e | 1行スクールダウン |
| Ctrl + y | 1行スクロールアップ |
| Ctrl + d | 半画面スクロールダウン |
| Ctrl + u | 半画面スクロールアップ |
| Ctrl + f | 1画面スクロールダウン |
| Ctrl + b | 1画面スクロールアップ |
| z + Enter または z + t | 現在のカーソルが画面の1番上になるようにスクロール |
| z + . | 現在のカーソルが画面の中央になるようにスクロール |
| z + - | 現在のカーソルが画面の1番下になるようにスクロール |
{{< /table >}}

### オペレータコマンドも必須

モーションコマンドを覚えたらオペレータコマンドも覚えましょう。以下の4つのオペレータコマンドは```<オペレーションコマンド>``` + ```<モーションコマンド>```という風に組み合わせることで、使うことができます。

{{< table >}}
| コマンド | 操作 |
|---|---|
| y | ヤンク(コピーのこと) |
| d | 切り取り |
| c | 変更 |
| g | カーソル移動 |
{{< /table >}}

```g```に関して、```g;```で「直前に変更した位置にカーソルを移動」という処理になり再び```g;```と入力することで変更リストを遡ることができます。また、```g,```では「遡った変更リストを逆順に進め, カーソルを移動をする」という処理になり、これも再び```g,```と入力することで変更リストを逆順に進めることができます。

オペレータコマンドとモーションコマンドの組み合わせの仕方の例を紹介します。

***

```y```(ヤンク) + ```2```(2回) + ```l```(右へカーソルを移動)

これは「現在のカーソルから2回右へカーソルを移動した位置までの範囲をヤンクする」という意味になります。」

***

```d```(切り取り) + ```3```(3回) + ```e```(単語の最後へカーソルを移動)

これは「現在のカーソルが乗っている単語を含む、現在カーソル以降の3単語を切り取りする」という意味になります。

***

### 色々なコマンド

他にも色々なコマンドが存在します。

{{< table >}}
| コマンド | 操作 |
|---|---|
| yy | 1行をヤンク(コピー) |
| Y | 現在のカーソルから行末までヤンク(コピー) |
| dd | 1行を切り取り |
| D | 現在のカーソルから行末まで切り取り |
| p | 現在のカーソルの後にプット(ペースト) |
| P | 現在のカーソルの前にプット(ペースト) |
| u | 変更を1個戻す |
| U | 行の中の最近の変更を全て戻す |
| * | カーソル下の単語を下方向に検索 |
| # | カーソル下の単語を上方向に検索 |
| Ctrl + r | 戻された変更をやり直す(redoする) |
| Ctrl + z | Vimを一時停止してターミナルに戻る、ターミナルでfgコマンドと叩いて再開 |
| ZZ | 保存して終了(:wqと同じ) |
{{< /table >}}
